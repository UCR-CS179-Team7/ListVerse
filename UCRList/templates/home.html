{% extends '_layouts/base.html' %}
{% load friendshiptags %}

{% block headline %}<h1>AWESOME!!</h1>{% endblock headline %}

{% block content %}
<p>It works! Good Job{% if user.is_authenticated %} {{ user.username }}{% endif %}!</p>
{% if user.is_authenticated %}
    <h4> Friends </h4>
    {% friends user %}

    <h4> Followers </h4>
    <ul>
        {% for f in followers %}
            <li>{{ f.username }}</li>
        {% endfor %}
    </ul>

    <h4> Following </h4>
    {% following user %}

    <p> Messages: </p>
    <form method="post" action="">
      {% csrf_token %}
      <table class="table table-hover">
        <thead>
          <tr>
            <th>From</th>
            <th>Content</th>
            <th></th>
            <th>Date</th>
          </tr>
        </thead>
        {% for frequest in frequests %}
        <tr>
          <td><a href="/profiles/view/{{frequest.from_user}}">{{frequest.from_user}}</a></td>
          <td> {{frequest.message}} </td>
          <td> <button name="accept" value="{{frequest.id}}" type="submit" class="btn btn-success btn-sm">Accept</button>
               <button name="reject" value="{{frequest.id}}" type="submit" class="btn btn-danger btn-sm">Reject</button>
          </td>
          <td>{{frequest.created}}</td>
        </tr>
        {% endfor %}
        {% for list_notification in list_notifications %}
        <tr>
          <td><a href="{% url 'profiles:view' username=list_notification.from_user sortmethod='default' %}">{{list_notification.from_user}}</a></td>
          <td> {{list_notification.content}} </td>
          <td></td>
          <td>{{list_notification.send_date}} </td>
        </tr>
        {% endfor %}
      </table>
    </form>
{% endif %}
{% endblock %}
