<!--TODO-->
{% extends '_layouts/base.html' %}
{% load crispy_forms_tags %}
{% load friendshiptags %}

{% block content %}
{% if not not_friends or not not_self %}
<div class="row">
  <div class="col-md-6">
    <img style="display:block; margin: 0 auto;" class="img-circle" src="{{ MEDIA_URL }}{{ profile.avatar }}" height="100" width="100"/>

    <center>
      <h1>{{profile.user.username}}</h1>
      <p><strong>Nickname</strong>: {{profile.nickname}}</p>
      <p><strong>Gender</strong>: {{profile.gender}}</p>
      <p><strong>Birthday</strong>: {{profile.birthday}}</p>
      <p><strong>Active user since</strong>: {{profile.creation_date}}</p>
    </center>
  </div>
  <div class="col-md-6">
    <h3>{{profile.user.username}}'s Friends </h3>
    {% friends profile.user %}

    <h3>{{profile.user.username}}'s Followers </h3>
    <ul>
      {% for f in followers %}
      <li>{{ f.username }}</li>
      {% endfor %}
    </ul>
    <h4> Following </h4>
    {% following profile.user %}
    <h4>Favorite Topics</h4>
    <ul>
       {% for topic in topicList %}
      <li> {{topic.get_topic_display}} </li>
      {% endfor %}
    </ul>
  </div>
</div>


{% endif %}
<div class="col-md-11">
  <div>
      <h1>{{ profile.user.username }}'s lists</h1>
      <div class="btn-group" role="group" aria-label="...">
        <a class="btn btn-info" href="/profiles/view/{{profile.user.username}}/ascending">Time Ascending</a>
        <a class="btn btn-info"href="/profiles/view/{{profile.user.username}}/descending">Time Descending</a>
        <a class="btn btn-info"href="/profiles/view/{{profile.user.username}}/alphabetical">A-Z</a>
        <a class="btn btn-info"href="/profiles/view/{{profile.user.username}}/ralphabetical">Z-A</a>
      </div>
      <table class="table table-hover">
          <thead>
              <tr>
                  <td>Title</td><td>Created by</td><td>Publish date</td>
              </tr>
          </thead>
          {% for list in userLists %}
            <tr>
              <td>
                <a href="{% url 'lists:detail' slug=list.slug %}">{{ list.title }}</a>
                {% if not not_self %}
                  <a href="{% url 'lists:edit' slug=list.slug %}"><small>(Edit)</small></a>
                  <form method="post" action="{% url 'lists:delete' slug=list.slug %}">
                    {% csrf_token $}
                    <button class="btn btn-link" type="submit"><small class="text-danger">(Delete)</small></button>
                  </form>
                {% endif %}</td>
              <td> <a href="{% url 'profiles:view' username=list.owner sortmethod='default'%}">{{ list.owner }}</a></td>
              <td>{{ list.pub_date }}</p></td>
            </tr>
          {% endfor %}
      </table>
  </div>
</div>
<div class="col-md-4">

</div>
<div class="row">
  <div class="span4 offset2">
    {% if not_self %}
      {% if not_friends and not active_request %}
      <form method="post" action="{% url 'profiles:addfriend' username=profile.user.username sortmethod='default' %}">{% csrf_token %}
        <button class="btn btn-default" type="submit">Add Friend</button>
      </form>
      {% endif %}

      {% if doesnt_follow  %}
      <form method="post" action="{% url 'profiles:followuser' username=profile.user.username sortmethod='default' %}">
        {% csrf_token %}
        <button class="btn btn-default" type="submit">Follow User</button>
      </form>
      {% endif %}
    {% endif %}
  </div>
</div>


{% endblock %}
